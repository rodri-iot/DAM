<ion-header>
  <ion-toolbar>
    <ion-title>{{ dispositivo.nombre }} Sensor: {{ dispositivo.dispositivoId }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Ubicación</ion-card-title>
      <ion-card-subtitle>{{ dispositivo.ubicacion }}</ion-card-subtitle>
    </ion-card-header>
  </ion-card>

  <ion-card *ngIf="ultimaMedicion">
    <ion-card-header>
      <ion-card-title>Última Medición</ion-card-title>
      <ion-card-subtitle>Fecha: {{ ultimaMedicion.fecha | date:'short' }}</ion-card-subtitle>
      <ion-card-subtitle>Humedad: {{ ultimaMedicion.valor }}%</ion-card-subtitle>
    </ion-card-header>
  </ion-card>
  

  <ion-card *ngIf="!ultimaMedicion">
    <ion-card-header>
      <ion-card-title>Última Medición</ion-card-title>
      <ion-card-subtitle>No hay mediciones disponibles.</ion-card-subtitle>
    </ion-card-header>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Estado de la Válvula</ion-card-title>
      <ion-card-subtitle>{{ dispositivo.estadoValvula === 1 ? 'Abierta' : 'Cerrada' }}</ion-card-subtitle>
    </ion-card-header>
  </ion-card>

  <div class="acciones">
    <ion-button expand="block" color="success" (click)="cambiarEstadoValvula(true)">
      Abrir Válvula
    </ion-button>
    <ion-button expand="block" color="danger" (click)="cambiarEstadoValvula(false)">
      Cerrar Válvula
    </ion-button>
    <ion-button expand="block" (click)="verMediciones()">
      Ver Mediciones
    </ion-button>
  </div>
</ion-content>
